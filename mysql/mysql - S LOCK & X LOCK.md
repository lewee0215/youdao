# Mysql共享锁和排他锁
https://blog.csdn.net/diaobatian/article/details/90603887  

InnoDB引擎默认的修改数据语句，update,delete,insert都会自动给涉及到的数据加上排他锁
<font color='yellow'> select语句默认不会加任何锁类型 </font>

如果加排他锁可以使用select ...for update语句，加共享锁可以使用select ... lock in share mode语句

## 共享锁又称为读锁(S LOCK)
共享锁就是多个事务对于同一数据可以共享一把锁，都能访问到数据，但是只能读不能修改

## 排他锁又称为写锁(X LOCK)
一个事务在一行数据加上排他锁后，其他事务不能再在其上加其他的锁

# 三级封锁协议
https://blog.csdn.net/qq_33369979/article/details/88052203
在运用X锁和S锁对数据对象加锁时，还需要约定一些规则 ，例如何时申请X锁或S锁、持锁时间、何时释放等。称这些规则为封锁协议（Locking Protocol）。对封锁方式规定不同的规则，就形成了各种不同的封锁协议

## 一级封锁协议
一级封锁协议是：事务T在修改数据R之前必须先对其加X锁，直到事务结束才释放。事务结束包括正常结束（COMMIT）和非正常结束（ROLLBACK）

## 二级封锁协议
二级封锁协议是：一级封锁协议加上事务T在读取数据R之前必须先对其加S锁，读完后方可释放S锁

二级封锁协议除防止了丢失修改，还可以进一步防止读“脏”数据（确保在数据读取期间没有其它事务修改）。但在二级封锁协议中，由于读完数据后即可释放S锁，所以它不能保证可重复读

## 三级封锁协议
三级封锁协议是：一级封锁协议加上事务T在读取数据R之前必须先对其加S锁，直到事务结束才释放。

三级封锁协议除防止了丢失修改和不读“脏”数据外，还进一步防止了不可重复读。（因为直到事务结束前，由于加了S锁，始终不会有其它事务对其进行修改）